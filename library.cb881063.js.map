{"mappings":"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","sources":["src/js/library.js","src/js/library-main.js"],"sourcesContent":["import './constants/refs';\nimport './queue';\nimport './library-main';\nimport './modalCard';\nimport './modalAbout';\nimport './upToTop';\n\nimport {\n  singUp,\n  singIn,\n  logOut,\n  getData,\n  postData,\n  authObserver,\n} from './api/firebase/api';\n\nconst email = document.getElementById('email_singUp');\nconst password = document.getElementById('password_singUp');\n\nconst btnSingUp = document.getElementById('btn_singUp');\nconst btnSingIn = document.getElementById('btn_singIn');\nconst btnLogOut = document.getElementById('btn_logout');\n\nconst btnToPost = document.getElementById('btnToPost');\nconst btnToRequest = document.getElementById('btnToRequest');\n\nauthObserver();\n\nbtnSingUp.addEventListener('click', async e => {\n  e.preventDefault();\n  singUp(email.value, password.value);\n});\n\nbtnSingIn.addEventListener('click', e => {\n  e.preventDefault();\n  singIn(email.value, password.value);\n});\n\nbtnLogOut.addEventListener('click', () => {\n  logOut();\n});\n\nbtnToPost.addEventListener('click', async () => {\n  postData(usersFilms);\n});\n\nbtnToRequest.addEventListener('click', async () => {\n  a = await getData();\n  console.log(a);\n});\n","// imports\nimport { getMoviesDetails } from './api/moviedb/getMoviesDetails';\nimport createMarkUp from '../templates/film-cards.hbs';\nimport { refs } from './constants/refs';\nimport {\n  storage,\n  STORAGE,\n  ANON_WATCHED,\n  ANON_QUEUE,\n  localStorageAPI,\n} from './constants/storage';\nimport Handlebars from 'handlebars';\n\n// references\nconst { headerWatchedBtn, headerQueueBtn, mainList } = refs;\n\n// variables\nconst ACCENT_BTN_CLASS = \"button--accent\";\nconst perPage = choisePerPage(document.body.clientWidth);\nlet libraryQuery = ANON_WATCHED;\n\n// preorders\n// storage[ANON_WATCHED] = [\n//   '154',\n//   '584',\n//   '1254',\n//   '154',\n//   '584',\n//   '1254',\n//   '154',\n//   '584',\n//   '1254',\n//   '154',\n//   '584',\n//   '1254',\n// ];\n// localStorageAPI.save(STORAGE, storage);\n\n// event listeners\nheaderWatchedBtn.addEventListener('click', onClickWatched);\nheaderQueueBtn.addEventListener('click', onClickQueue);\n\n// event listeners functions\nfunction onClickWatched() {\n  accentWatchedBtn();\n  \n  libraryQuery = ANON_WATCHED;\n\n\n  renderLibraryMainContent(1);\n\n  if (!headerQueueBtn.classList.contains('button--accent')) {\n    headerQueueBtn.classList.add('button--accent');\n  }\n  if (headerWatchedBtn.classList.contains('button--accent')) {\n    headerWatchedBtn.classList.remove('button--accent');\n  }\n\n}\n\nfunction onClickQueue() {\n  accentQueueBtn();\n\n  libraryQuery = ANON_QUEUE;\n\n  renderLibraryMainContent(1);\n}\n\n// functions helpers\nfunction renderLibraryMainContent(page) {\n  if (localStorageAPI.load(STORAGE)) {\n    renderLibraryCards(page)\n  } else {\n    renderEmptyLibrary()\n\n    if (!headerWatchedBtn.classList.contains('button--accent')) {\n      headerWatchedBtn.classList.add('button--accent');\n    }\n    if (headerQueueBtn.classList.contains('button--accent')) {\n      headerQueueBtn.classList.remove('button--accent');\n    }\n\n    if (localStorageAPI.load(STORAGE)) {\n      renderWatchedMarkup(watchedPage);\n    } else {\n      renderEmptyWatched();\n    }\n  }\n}\n\nasync function renderLibraryCards(page) {\n  const markup = await createLibraryCardsdMarkup(page);\n\n  if (markup) {\n    mainList.innerHTML = markup;\n    // place for pagination function \n    const arr = localStorageAPI.load(STORAGE)[libraryQuery];\n    const totalPages = arr.length;\n    // <== renderPagination(page, totalPages) ==>\n  } else {\n    renderEmptyLibrary();\n  }\n}\n\nfunction renderEmptyLibrary() {\n  if (libraryQuery === ANON_WATCHED) {\n    mainList.innerHTML = \"Nothing wathed yet\";\n    return\n  }\n  if (libraryQuery === ANON_QUEUE) {\n    mainList.innerHTML = \"Nothing in queue yet\";\n    return\n  }\n}\n\nfunction renderEmptyWatched() {\n  mainList.innerHTML = 'Nothing wathed yet';\n}\n\nasync function createLibraryCardsdMarkup(page) {\n  const filteredCardsArr = filterCardsdArr(page);\n\n  if (filteredCardsArr.length === 0) {\n    return null;\n  }\n\n  const moviePromises = filteredCardsArr.map(el => {\n    const movie = getMoviesDetails(el);\n    return movie;\n  });\n\n  try {\n    const movies = await Promise.all(moviePromises);\n    return createMarkUp(movies);\n  } catch (e) {\n    console.log(e.message);\n  }\n}\n\nfunction filterCardsdArr(page) {\n  const cardsArr = localStorageAPI.load(STORAGE)[libraryQuery];\n\n  return cardsArr.filter((value, index) => {\n    if (index >= perPage * (page - 1) && index < perPage * page) {\n      return value;\n    }\n  });\n}\n\nfunction choisePerPage(screenWidth) {\n  if (screenWidth >= 1280) {\n    return 9;\n  }\n  if (screenWidth < 768) {\n    return 4;\n  }\n  return 8;\n}\n\n\nfunction accentWatchedBtn() {\n  if ( !headerWatchedBtn.classList.contains(ACCENT_BTN_CLASS)) {\n    headerWatchedBtn.classList.add(ACCENT_BTN_CLASS);\n    headerQueueBtn.classList.remove(ACCENT_BTN_CLASS);\n  }\n}\n\nfunction accentQueueBtn() {\n  if ( !headerQueueBtn.classList.contains(ACCENT_BTN_CLASS)) {\n    headerQueueBtn.classList.add(ACCENT_BTN_CLASS);\n    headerWatchedBtn.classList.remove(ACCENT_BTN_CLASS);\n  }\n}\n\n// exports\nexport {renderLibraryMainContent};\n\n// фіксять рік там рейтинг на картках фільмів\nHandlebars.registerHelper('yearFixed', function (number) {\n  let today = new Date('2000-07-06');\n  let year = today.getFullYear();\n  return year;\n});\n\nHandlebars.registerHelper('numberFixed', function (number) {\n  return number.toFixed(1);\n});\n"],"names":["parcelRequire","$iaNpe","headerWatchedBtn","$dd78b310be7c5ac9$var$headerWatchedBtn","headerQueueBtn","$dd78b310be7c5ac9$var$headerQueueBtn","mainList","$dd78b310be7c5ac9$var$mainList","$8N7ah","refs","$dd78b310be7c5ac9$var$perPage","screenWidth","document","body","clientWidth","$dd78b310be7c5ac9$var$libraryQuery","$jqFpy","ANON_WATCHED","$dd78b310be7c5ac9$export$243b4d1206135091","page","localStorageAPI","load","STORAGE","async","markup","filteredCardsArr","filter","value","index","$dd78b310be7c5ac9$var$filterCardsdArr","length","moviePromises","map","el","getMoviesDetails","movies","Promise","all","$bJAXj","default","e","console","log","message","$dd78b310be7c5ac9$var$createLibraryCardsdMarkup","innerHTML","$dd78b310be7c5ac9$var$renderEmptyLibrary","$dd78b310be7c5ac9$var$renderLibraryCards","classList","contains","add","remove","renderWatchedMarkup","watchedPage","ANON_QUEUE","addEventListener","$parcel$interopDefault","$amrNH","registerHelper","number","Date","getFullYear","toFixed","$1cafa503bc57b7a0$var$email","getElementById","$1cafa503bc57b7a0$var$password","$1cafa503bc57b7a0$var$btnSingUp","$1cafa503bc57b7a0$var$btnSingIn","$1cafa503bc57b7a0$var$btnLogOut","$1cafa503bc57b7a0$var$btnToPost","$1cafa503bc57b7a0$var$btnToRequest","$eAZYX","authObserver","preventDefault","singUp","singIn","logOut","postData","usersFilms","a","getData"],"version":3,"file":"library.cb881063.js.map"}