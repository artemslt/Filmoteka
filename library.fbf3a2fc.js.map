{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-ca6818f56c2ecd2c.js","src/js/library.js","src/js/watched.js","src/js/constants/storage.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"jNRdE\\\":\\\"library.fbf3a2fc.js\\\",\\\"ee16w\\\":\\\"sprite.aa729b31.svg\\\",\\\"cSIeN\\\":\\\"index.1b573b25.js\\\"}\"));","import './constants/refs';\nimport './queue';\nimport './watched';\nimport './modalCard';\nimport './modalAbout';\nimport './upToTop';\n\nimport {\n  singUp,\n  singIn,\n  logOut,\n  getData,\n  postData,\n  authObserver,\n} from './api/firebase/api';\n\nconst email = document.getElementById('email_singUp');\nconst password = document.getElementById('password_singUp');\n\nconst btnSingUp = document.getElementById('btn_singUp');\nconst btnSingIn = document.getElementById('btn_singIn');\nconst btnLogOut = document.getElementById('btn_logout');\n\nconst btnToPost = document.getElementById('btnToPost');\nconst btnToRequest = document.getElementById('btnToRequest');\n\nauthObserver();\n\nbtnSingUp.addEventListener('click', async e => {\n  e.preventDefault();\n  singUp(email.value, password.value);\n});\n\nbtnSingIn.addEventListener('click', e => {\n  e.preventDefault();\n  singIn(email.value, password.value);\n});\n\nbtnLogOut.addEventListener('click', () => {\n  logOut();\n});\n\nbtnToPost.addEventListener('click', async () => {\n  postData(usersFilms);\n});\n\nbtnToRequest.addEventListener('click', async () => {\n  a = await getData();\n  console.log(a);\n});\n","// imports\nimport { getMoviesDetails } from \"./api/moviedb/getMoviesDetails\";\nimport createMarkUp from '../templates/film-cards.hbs';\nimport { refs } from \"./constants/refs\";\nimport { storage, STORAGE, ANON_WATCHED, ANON_QUEUE, localStorageAPI } from \"./constants/storage\";\n\n// references\nconst { headerWatchedBtn, headerQueueBtn, mainList } = refs;\n\n// variables\nconst bodyWidth = document.body.clientWidth;\nlet watchedPage = 1;\n\n// preorders\nstorage[ANON_WATCHED] = [\"154\", \"584\", \"1254\", \"154\", \"584\", \"1254\", \"154\", \"584\", \"1254\", \"154\", \"584\", \"1254\"];\nlocalStorageAPI.save(STORAGE, storage);\n\n// event listeners\nheaderWatchedBtn.addEventListener('click', onClickWatched)\nheaderQueueBtn.addEventListener('click', onClickQueue)\n\n// event listeners functions\nfunction onClickQueue() {\n  watchedPage = 1;\n\n  if ( !headerQueueBtn.classList.contains(\"button--accent\")) {\n    headerQueueBtn.classList.add(\"button--accent\");\n  }\n  if ( headerWatchedBtn.classList.contains(\"button--accent\")) {\n    headerWatchedBtn.classList.remove(\"button--accent\");\n  }\n}\n\nfunction onClickWatched() {\n  watchedPage = 1;\n\n  if ( !headerWatchedBtn.classList.contains(\"button--accent\")) {\n    headerWatchedBtn.classList.add(\"button--accent\");\n  }\n  if ( headerQueueBtn.classList.contains(\"button--accent\")) {\n    headerQueueBtn.classList.remove(\"button--accent\");\n  }\n  \n  if (localStorageAPI.load(STORAGE)) {\n    renderWatchedMarkup(watchedPage)\n  } else {\n    renderEmptyWatched()\n  }\n}\n\n// functions helpers\nasync function renderWatchedMarkup(page) {\n  const markup = await createWatchedMarkup(page);\n\n  if (markup) {\n    mainList.innerHTML = markup;\n  } else {\n    renderEmptyWatched();\n  }\n}\n\nfunction renderEmptyWatched() {\n  mainList.innerHTML = \"Nothing wathed yet\";\n}\n\nasync function createWatchedMarkup(page) {\n  const filteredWatchedArr = filterWatchedArr(page);\n\n  if (filteredWatchedArr.length === 0) {\n    return null;\n  }\n\n  const moviePromises = filteredWatchedArr.map(el => {\n    const movie = getMoviesDetails(el);\n    return movie;\n  })\n\n  try {\n    const movies = await Promise.all(moviePromises);\n    return createMarkUp(movies);\n  } catch (e) {\n    console.log(e.message);\n  }\n}\n\nfunction filterWatchedArr(page) {\n  const filterNumber = choiseFilterNumber(bodyWidth);\n  const watchedArr = localStorageAPI.load(STORAGE)[ANON_WATCHED];\n\n  return watchedArr.filter((value, index) => {\n    if (index >= filterNumber * (page - 1) && index < filterNumber * page) {\n      return value;\n    }\n  })\n}\n\nfunction choiseFilterNumber(screenWidth) {\n  if (screenWidth >= 1280) {\n    return 9;\n  } else if (screenWidth < 768) {\n    return 4;\n  }\n  return 8;\n}\n","export const storage = {\n    queue: [],\n    watched: []\n}\nexport const ANON_WATCHED = \"watched\";\nexport const ANON_QUEUE = \"queue\";\nexport const STORAGE = \"storage\";\nexport const localStorageAPI = {\n    save,\n    load,\n};\n\nfunction save(key, value) {\n    try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error(\"Set state error: \", error.message);\n  }\n}\n\nfunction load(key) {\n    try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(\"Get state error: \", error.message);\n  }\n}"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$9fz8o","$8bf643f7702e6ad9$export$ddcffe0146c8f882","queue","watched","$8bf643f7702e6ad9$export$e52920da3d8ae458","$8bf643f7702e6ad9$export$4a683aab0e79cfdc","key","value","serializedState","stringify","localStorage","setItem","error","console","message","getItem","undefined","headerWatchedBtn","$a215baf1061f969f$var$headerWatchedBtn","headerQueueBtn","$a215baf1061f969f$var$headerQueueBtn","mainList","$a215baf1061f969f$var$mainList","$5DkEY","refs","$a215baf1061f969f$var$bodyWidth","document","body","clientWidth","$a215baf1061f969f$var$watchedPage","$a215baf1061f969f$var$renderEmptyWatched","innerHTML","save","addEventListener","classList","contains","add","remove","load","async","page","markup","filteredWatchedArr","filterNumber","screenWidth","$a215baf1061f969f$var$choiseFilterNumber","filter","index","$a215baf1061f969f$var$filterWatchedArr","moviePromises","map","el","getMoviesDetails","movies","Promise","all","$1ZLLT","default","e","log","$a215baf1061f969f$var$createWatchedMarkup","$a215baf1061f969f$var$renderWatchedMarkup","$93effc6fc56091ad$var$email","getElementById","$93effc6fc56091ad$var$password","$93effc6fc56091ad$var$btnSingUp","$93effc6fc56091ad$var$btnSingIn","$93effc6fc56091ad$var$btnLogOut","$93effc6fc56091ad$var$btnToPost","$93effc6fc56091ad$var$btnToRequest","$6bgo7","authObserver","preventDefault","singUp","singIn","logOut","postData","usersFilms","a","getData"],"version":3,"file":"library.fbf3a2fc.js.map"}