{"mappings":"qhBAAAA,EAAA,SCCA,IAAAC,EAAAD,EAAA,S,oDAaA,MAAME,iBAAEC,EAAgBC,eAAEC,EAAcC,SAAEC,GAAaC,EAAAC,KAGjDC,EAAYC,SAASC,KAAKC,YAChC,IAAIC,EAAc,EA+DlB,SAASC,IACPR,EAASS,UAAY,oB,CA5CvBb,EAAiBc,iBAAiB,SAelC,WACEH,EAAc,EAETX,EAAiBe,UAAUC,SAAS,mBACvChB,EAAiBe,UAAUE,IAAI,kBAE7Bf,EAAea,UAAUC,SAAS,mBACpCd,EAAea,UAAUG,OAAO,kBAG9BC,EAAAC,gBAAgBC,KAAKF,EAAAG,SAQ3BC,eAAmCC,GACjC,MAAMC,QAaRF,eAAmCC,GACjC,MAAME,EAmBR,SAA0BF,GACxB,MAAMG,EAUR,SAA4BC,GAC1B,GAAIA,GAAe,KACjB,OAAO,EACF,GAAIA,EAAc,IACvB,OAAO,EAET,OAAO,C,CAhBcC,CAAmBtB,GAGxC,OAFmBY,EAAAC,gBAAgBC,KAAKF,EAAAG,SAASH,EAAAW,cAE/BC,QAAO,CAACC,EAAOC,KAC/B,GAAIA,GAASN,GAAgBH,EAAO,IAAMS,EAAQN,EAAeH,EAC/D,OAAOQ,CAAK,G,CAzBWE,CAAiBV,GAE5C,GAAkC,IAA9BE,EAAmBS,OACrB,OAAO,KAGT,MAAMC,EAAgBV,EAAmBW,KAAIC,IAC7B,EAAAxC,EAAAyC,kBAAiBD,KAIjC,IACE,MAAME,QAAeC,QAAQC,IAAIN,GACjC,OAAO,EAAAO,EAAAC,SAAaJ,E,CACpB,MAAOK,GACPC,QAAQC,IAAIF,EAAEG,Q,EA7BKC,CAAoBzB,GAErCC,EACFrB,EAASS,UAAYY,EAErBb,G,CAbAsC,CAAoBvC,GAEpBC,G,IA3BJV,EAAeY,iBAAiB,SAGhC,WACEH,EAAc,EAETT,EAAea,UAAUC,SAAS,mBACrCd,EAAea,UAAUE,IAAI,kBAE3BjB,EAAiBe,UAAUC,SAAS,mBACtChB,EAAiBe,UAAUG,OAAO,iB,IA6EtCiC,EAAAC,GAAWC,eAAe,aAAa,SAAUC,GAG/C,OAFY,IAAIC,KAAK,cACJC,a,IAInBL,EAAAC,GAAWC,eAAe,eAAe,SAAUC,GACjD,OAAOA,EAAOG,QAAQ,E,sDDrHxB,MAAMC,EAAQlD,SAASmD,eAAe,gBAChCC,EAAWpD,SAASmD,eAAe,mBAEnCE,EAAYrD,SAASmD,eAAe,cACpCG,EAAYtD,SAASmD,eAAe,cACpCI,EAAYvD,SAASmD,eAAe,cAEpCK,EAAYxD,SAASmD,eAAe,aACpCM,EAAezD,SAASmD,eAAe,iBAE7C,EAAAO,EAAAC,gBAEAN,EAAU/C,iBAAiB,SAASS,MAAMsB,IACxCA,EAAEuB,kBACF,EAAAF,EAAAG,QAAOX,EAAM1B,MAAO4B,EAAS5B,MAAM,IAGrC8B,EAAUhD,iBAAiB,SAAS+B,IAClCA,EAAEuB,kBACF,EAAAF,EAAAI,QAAOZ,EAAM1B,MAAO4B,EAAS5B,MAAM,IAGrC+B,EAAUjD,iBAAiB,SAAS,MAClC,EAAAoD,EAAAK,SAAQ,IAGVP,EAAUlD,iBAAiB,SAASS,WAClC,EAAA2C,EAAAM,UAASC,WAAW,IAGtBR,EAAanD,iBAAiB,SAASS,UACrCmD,QAAU,EAAAR,EAAAS,WACV7B,QAAQC,IAAI2B,EAAE","sources":["src/js/library.js","src/js/watched.js"],"sourcesContent":["import './constants/refs';\nimport './queue';\nimport './watched';\nimport './modalCard';\nimport './modalAbout';\nimport './upToTop';\n\nimport {\n  singUp,\n  singIn,\n  logOut,\n  getData,\n  postData,\n  authObserver,\n} from './api/firebase/api';\n\nconst email = document.getElementById('email_singUp');\nconst password = document.getElementById('password_singUp');\n\nconst btnSingUp = document.getElementById('btn_singUp');\nconst btnSingIn = document.getElementById('btn_singIn');\nconst btnLogOut = document.getElementById('btn_logout');\n\nconst btnToPost = document.getElementById('btnToPost');\nconst btnToRequest = document.getElementById('btnToRequest');\n\nauthObserver();\n\nbtnSingUp.addEventListener('click', async e => {\n  e.preventDefault();\n  singUp(email.value, password.value);\n});\n\nbtnSingIn.addEventListener('click', e => {\n  e.preventDefault();\n  singIn(email.value, password.value);\n});\n\nbtnLogOut.addEventListener('click', () => {\n  logOut();\n});\n\nbtnToPost.addEventListener('click', async () => {\n  postData(usersFilms);\n});\n\nbtnToRequest.addEventListener('click', async () => {\n  a = await getData();\n  console.log(a);\n});\n","// imports\nimport { getMoviesDetails } from './api/moviedb/getMoviesDetails';\nimport createMarkUp from '../templates/film-cards.hbs';\nimport { refs } from './constants/refs';\nimport {\n  storage,\n  STORAGE,\n  ANON_WATCHED,\n  ANON_QUEUE,\n  localStorageAPI,\n} from './constants/storage';\nimport Handlebars from 'handlebars';\n\n// references\nconst { headerWatchedBtn, headerQueueBtn, mainList } = refs;\n\n// variables\nconst bodyWidth = document.body.clientWidth;\nlet watchedPage = 1;\n\n// preorders\n// storage[ANON_WATCHED] = [\n//   '154',\n//   '584',\n//   '1254',\n//   '154',\n//   '584',\n//   '1254',\n//   '154',\n//   '584',\n//   '1254',\n//   '154',\n//   '584',\n//   '1254',\n// ];\n// localStorageAPI.save(STORAGE, storage);\n\n// event listeners\nheaderWatchedBtn.addEventListener('click', onClickWatched);\nheaderQueueBtn.addEventListener('click', onClickQueue);\n\n// event listeners functions\nfunction onClickQueue() {\n  watchedPage = 1;\n\n  if (!headerQueueBtn.classList.contains('button--accent')) {\n    headerQueueBtn.classList.add('button--accent');\n  }\n  if (headerWatchedBtn.classList.contains('button--accent')) {\n    headerWatchedBtn.classList.remove('button--accent');\n  }\n}\n\nfunction onClickWatched() {\n  watchedPage = 1;\n\n  if (!headerWatchedBtn.classList.contains('button--accent')) {\n    headerWatchedBtn.classList.add('button--accent');\n  }\n  if (headerQueueBtn.classList.contains('button--accent')) {\n    headerQueueBtn.classList.remove('button--accent');\n  }\n\n  if (localStorageAPI.load(STORAGE)) {\n    renderWatchedMarkup(watchedPage);\n  } else {\n    renderEmptyWatched();\n  }\n}\n\n// functions helpers\nasync function renderWatchedMarkup(page) {\n  const markup = await createWatchedMarkup(page);\n\n  if (markup) {\n    mainList.innerHTML = markup;\n  } else {\n    renderEmptyWatched();\n  }\n}\n\nfunction renderEmptyWatched() {\n  mainList.innerHTML = 'Nothing wathed yet';\n}\n\nasync function createWatchedMarkup(page) {\n  const filteredWatchedArr = filterWatchedArr(page);\n\n  if (filteredWatchedArr.length === 0) {\n    return null;\n  }\n\n  const moviePromises = filteredWatchedArr.map(el => {\n    const movie = getMoviesDetails(el);\n    return movie;\n  });\n\n  try {\n    const movies = await Promise.all(moviePromises);\n    return createMarkUp(movies);\n  } catch (e) {\n    console.log(e.message);\n  }\n}\n\nfunction filterWatchedArr(page) {\n  const filterNumber = choiseFilterNumber(bodyWidth);\n  const watchedArr = localStorageAPI.load(STORAGE)[ANON_WATCHED];\n\n  return watchedArr.filter((value, index) => {\n    if (index >= filterNumber * (page - 1) && index < filterNumber * page) {\n      return value;\n    }\n  });\n}\n\nfunction choiseFilterNumber(screenWidth) {\n  if (screenWidth >= 1280) {\n    return 9;\n  } else if (screenWidth < 768) {\n    return 4;\n  }\n  return 8;\n}\n\n// фіксять рік там рейтинг на картках фільмів\nHandlebars.registerHelper('yearFixed', function (number) {\n  let today = new Date('2000-07-06');\n  let year = today.getFullYear();\n  return year;\n});\n\nHandlebars.registerHelper('numberFixed', function (number) {\n  return number.toFixed(1);\n});\n"],"names":["parcelRequire","$iaNpe","headerWatchedBtn","$7126a8cfa5cf9b17$var$headerWatchedBtn","headerQueueBtn","$7126a8cfa5cf9b17$var$headerQueueBtn","mainList","$7126a8cfa5cf9b17$var$mainList","$8N7ah","refs","$7126a8cfa5cf9b17$var$bodyWidth","document","body","clientWidth","$7126a8cfa5cf9b17$var$watchedPage","$7126a8cfa5cf9b17$var$renderEmptyWatched","innerHTML","addEventListener","classList","contains","add","remove","$jqFpy","localStorageAPI","load","STORAGE","async","page","markup","filteredWatchedArr","filterNumber","screenWidth","$7126a8cfa5cf9b17$var$choiseFilterNumber","ANON_WATCHED","filter","value","index","$7126a8cfa5cf9b17$var$filterWatchedArr","length","moviePromises","map","el","getMoviesDetails","movies","Promise","all","$bJAXj","default","e","console","log","message","$7126a8cfa5cf9b17$var$createWatchedMarkup","$7126a8cfa5cf9b17$var$renderWatchedMarkup","$parcel$interopDefault","$amrNH","registerHelper","number","Date","getFullYear","toFixed","$1cafa503bc57b7a0$var$email","getElementById","$1cafa503bc57b7a0$var$password","$1cafa503bc57b7a0$var$btnSingUp","$1cafa503bc57b7a0$var$btnSingIn","$1cafa503bc57b7a0$var$btnLogOut","$1cafa503bc57b7a0$var$btnToPost","$1cafa503bc57b7a0$var$btnToRequest","$eAZYX","authObserver","preventDefault","singUp","singIn","logOut","postData","usersFilms","a","getData"],"version":3,"file":"library.21522ade.js.map"}